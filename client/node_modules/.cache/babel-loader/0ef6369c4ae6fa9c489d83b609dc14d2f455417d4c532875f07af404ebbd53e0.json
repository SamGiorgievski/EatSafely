{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bradwilliams/Builds/EatSafely/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bradwilliams/Builds/EatSafely/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bradwilliams/Builds/EatSafely/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import Modal from\"react-modal\";import axios from\"axios\";import\"./Translate.scss\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Translate(_ref){var intolerances=_ref.intolerances;var _useState=useState(\"en\"),_useState2=_slicedToArray(_useState,2),lang=_useState2[0],setLang=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),translation=_useState4[0],setTranslation=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),cardContents=_useState6[0],setCardContents=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalIsOpen=_useState8[0],setModalIsOpen=_useState8[1];useEffect(function(){setStoredData(JSON.parse(localStorage.getItem(\"userData\")));},[]);var handleLangChange=function handleLangChange(event){setLang(event.target.value);setModalIsOpen(true);translateTo(sentence);};var _useState9=useState(JSON.parse(localStorage.getItem(\"userData\"))),_useState10=_slicedToArray(_useState9,2),storedData=_useState10[0],setStoredData=_useState10[1];var sentence=\"Hello, my name is \".concat(storedData.data.user.first_name,\". Please be aware that I have some food\\nintolerances that I hope you will be able to accommodate. Could you\\nplease recommend something on the menu that does not contain, or\\nis not cooked with or around the following: \").concat(intolerances);function translateTo(_x){return _translateTo.apply(this,arguments);}function _translateTo(){_translateTo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(sentence){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://libretranslate.com/translate\",{method:\"POST\",body:JSON.stringify({q:sentence,source:\"en\",target:lang,format:\"text\",api_key:\"c2fc10e1-7f24-45b2-9cf7-ff69bc57d779\"}),headers:{\"Content-Type\":\"application/json\"}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setTranslation(data.translatedText);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0);return _context.abrupt(\"return\",\"Error occurred while translating the text.\");case 14:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return _translateTo.apply(this,arguments);}translateTo(sentence);return/*#__PURE__*/_jsxs(\"div\",{className:\"full--content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"img--div\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://whatsupusana.com/wp-content/uploads/2016/08/TravelFood.jpg\",alt:\"\",className:\"picture\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://khni.kerry.com/wp-content/uploads/2018/12/Travel-eating-1024x683.jpg\",alt:\"\",className:\"picture\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://www.smartertravel.com/wp-content/uploads/2017/06/asian-food-from-above-shutterstock_446808100.jpg\",alt:\"\",className:\"picture\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"main--section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container--card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Travel Cards\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Here you can create a custom travel card that you can show restaurant staff that may speak a different language than you.\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Select language to translate to:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"lang\",id:\"lang\",onChange:handleLangChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"en\",children:\"English\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fr\",children:\"French\"}),/*#__PURE__*/_jsx(\"option\",{value:\"es\",children:\"Spanish\"}),/*#__PURE__*/_jsx(\"option\",{value:\"de\",children:\"German\"}),/*#__PURE__*/_jsx(\"option\",{value:\"it\",children:\"Italian\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ja\",children:\"Japanese\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ko\",children:\"Korean\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pt\",children:\"Portuguese\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tr\",children:\"Turkish\"})]})]})]})}),translation?/*#__PURE__*/_jsxs(Modal,{isOpen:modalIsOpen,onRequestClose:function onRequestClose(){return setModalIsOpen(false);},className:\"modal--card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card--title\",children:\"Restaurant Card\"}),/*#__PURE__*/_jsx(\"p\",{children:translation}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setModalIsOpen(false);setTranslation(\"\");},className:\"close--button\",children:\"Close\"})]}):/*#__PURE__*/_jsx(\"p\",{}),\";\"]});}export default Translate;","map":{"version":3,"names":["React","useState","Modal","axios","useEffect","Translate","intolerances","lang","setLang","translation","setTranslation","cardContents","setCardContents","modalIsOpen","setModalIsOpen","setStoredData","JSON","parse","localStorage","getItem","handleLangChange","event","target","value","translateTo","sentence","storedData","data","user","first_name","fetch","method","body","stringify","q","source","format","api_key","headers","response","json","translatedText","console","error"],"sources":["/Users/bradwilliams/Builds/EatSafely/client/src/pages/Translate.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Modal from \"react-modal\";\nimport axios from \"axios\";\nimport \"./Translate.scss\";\nimport { useEffect } from \"react\";\n\nfunction Translate({ intolerances }) {\n  const [lang, setLang] = useState(\"en\");\n  const [translation, setTranslation] = useState(\"\");\n  const [cardContents, setCardContents] = useState(\"\");\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  useEffect(() => {\n    setStoredData(JSON.parse(localStorage.getItem(\"userData\")));\n  }, []);\n  const handleLangChange = (event) => {\n    setLang(event.target.value);\n    setModalIsOpen(true);\n    translateTo(sentence);\n  };\n\n  const [storedData, setStoredData] = useState(\n    JSON.parse(localStorage.getItem(\"userData\"))\n  );\n\n  const sentence = `Hello, my name is ${storedData.data.user.first_name}. Please be aware that I have some food\nintolerances that I hope you will be able to accommodate. Could you\nplease recommend something on the menu that does not contain, or\nis not cooked with or around the following: ${intolerances}`;\n\n  async function translateTo(sentence) {\n    try {\n      const response = await fetch(\"https://libretranslate.com/translate\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          q: sentence,\n          source: \"en\",\n          target: lang,\n          format: \"text\",\n          api_key: \"c2fc10e1-7f24-45b2-9cf7-ff69bc57d779\",\n        }),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n      const data = await response.json();\n      setTranslation(data.translatedText);\n    } catch (error) {\n      console.error(error);\n      return \"Error occurred while translating the text.\";\n    }\n  }\n\n  translateTo(sentence);\n\n  return (\n    <div className=\"full--content\">\n      <div className=\"img--div\">\n        <img\n          src=\"https://whatsupusana.com/wp-content/uploads/2016/08/TravelFood.jpg\"\n          alt=\"\"\n          className=\"picture\"\n        />\n        <img\n          src=\"https://khni.kerry.com/wp-content/uploads/2018/12/Travel-eating-1024x683.jpg\"\n          alt=\"\"\n          className=\"picture\"\n        />\n        <img\n          src=\"https://www.smartertravel.com/wp-content/uploads/2017/06/asian-food-from-above-shutterstock_446808100.jpg\"\n          alt=\"\"\n          className=\"picture\"\n        />\n      </div>\n      <section className=\"main--section\">\n        <div className=\"container--card\">\n          <h1>Travel Cards</h1>\n          <p>\n            Here you can create a custom travel card that you can show\n            restaurant staff that may speak a different language than you.\n          </p>\n          <form action=\"\">\n            <label htmlFor=\"\">Select language to translate to:</label>\n            <select name=\"lang\" id=\"lang\" onChange={handleLangChange}>\n              <option value=\"en\">English</option>\n              <option value=\"fr\">French</option>\n              <option value=\"es\">Spanish</option>\n              <option value=\"de\">German</option>\n              <option value=\"it\">Italian</option>\n              <option value=\"ja\">Japanese</option>\n              <option value=\"ko\">Korean</option>\n              <option value=\"pt\">Portuguese</option>\n              <option value=\"tr\">Turkish</option>\n            </select>\n          </form>\n        </div>\n      </section>\n      {translation ? (\n        <Modal\n          isOpen={modalIsOpen}\n          onRequestClose={() => setModalIsOpen(false)}\n          className=\"modal--card\"\n        >\n          <h2 className=\"card--title\">Restaurant Card</h2>\n          <p>{translation}</p>\n          <button\n            onClick={() => {\n              setModalIsOpen(false);\n              setTranslation(\"\");\n            }}\n            className=\"close--button\"\n          >\n            Close\n          </button>\n        </Modal>\n      ) : (\n        <p></p>\n      )}\n      ;\n    </div>\n  );\n}\n\nexport default Translate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}