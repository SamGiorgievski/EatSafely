{"ast":null,"code":"import _slicedToArray from\"/Users/bradwilliams/Builds/EatSafely/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import EditProfile from\"../componetns/EditProfile\";import axios from\"axios\";import\"./Profile.scss\";import{useGlobalContext}from\"../context\";//Function that if the sting passed is greater than nth number of char, hides the remaining after 150 and adds ...\n// function truncate(string, n) {\n//   return string?.length > n ? string.substr(0, n - 1) + \"...\" : string;\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var getIntolerances=_ref.getIntolerances,showModal=_ref.showModal,setShowModal=_ref.setShowModal,toggleModal=_ref.toggleModal;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),intolerances=_useState2[0],setIntolerances=_useState2[1];var _useGlobalContext=useGlobalContext(),storedData=_useGlobalContext.storedData,setStoredData=_useGlobalContext.setStoredData;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){var data=JSON.parse(localStorage.getItem(\"userData\"));if(data){setStoredData(data);setLoading(false);}},[]);useEffect(function(){if(!loading&&storedData){axios.post(\"/intolerances\",{sessionData:storedData.data.user.id}).then(function(res){if(res.data.rows[0].intolerance){setIntolerances(res.data.rows[0].intolerance);getIntolerances(res.data.rows[0].intolerance);}}).catch(function(err){return console.error(err.response.data);});}},[storedData,loading,getIntolerances]);return/*#__PURE__*/_jsx(_Fragment,{children:storedData&&storedData.data&&/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"card-img-top\",src:\"https://t3.ftcdn.net/jpg/02/94/69/02/360_F_294690239_ydek2JMXB9aeQcYY05jVewc0xocZrCNg.jpg\",alt:\"veg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"h2 text-black mb-0 user--name\",children:\"\".concat(storedData.data.user.first_name,\" \").concat(storedData.data.user.last_name)})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group list-group-flush\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"First Name: \",storedData.data.user.first_name]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Last Name: \",storedData.data.user.last_name]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Email: \",storedData.data.user.email]}),/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[\"Intolerances: \",intolerances]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:toggleModal,className:\"btn btn-primary\",children:\"Edit\"})}),showModal&&/*#__PURE__*/_jsx(EditProfile,{toggle:toggleModal,state:(showModal,setShowModal),storedData:storedData,setIntolerances:setIntolerances})]})]})})});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","EditProfile","axios","useGlobalContext","Profile","getIntolerances","showModal","setShowModal","toggleModal","intolerances","setIntolerances","storedData","setStoredData","loading","setLoading","data","JSON","parse","localStorage","getItem","post","sessionData","user","id","then","res","rows","intolerance","catch","err","console","error","response","first_name","last_name","email"],"sources":["/Users/bradwilliams/Builds/EatSafely/client/src/pages/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport EditProfile from \"../componetns/EditProfile\";\nimport axios from \"axios\";\nimport \"./Profile.scss\";\nimport { useGlobalContext } from \"../context\";\n\n//Function that if the sting passed is greater than nth number of char, hides the remaining after 150 and adds ...\n// function truncate(string, n) {\n//   return string?.length > n ? string.substr(0, n - 1) + \"...\" : string;\n\nconst Profile = ({ getIntolerances, showModal, setShowModal, toggleModal }) => {\n  const [intolerances, setIntolerances] = useState([]);\n  const { storedData, setStoredData } = useGlobalContext();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(\"userData\"));\n    if (data) {\n      setStoredData(data);\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!loading && storedData) {\n      axios\n        .post(\"/intolerances\", {\n          sessionData: storedData.data.user.id,\n        })\n        .then((res) => {\n          if (res.data.rows[0].intolerance) {\n            setIntolerances(res.data.rows[0].intolerance);\n            getIntolerances(res.data.rows[0].intolerance);\n          }\n        })\n        .catch((err) => console.error(err.response.data));\n    }\n  }, [storedData, loading, getIntolerances]);\n\n  return (\n    <>\n      {storedData && storedData.data && (\n        <section>\n          <div className=\"card\">\n            <img\n              className=\"card-img-top\"\n              src=\"https://t3.ftcdn.net/jpg/02/94/69/02/360_F_294690239_ydek2JMXB9aeQcYY05jVewc0xocZrCNg.jpg\"\n              alt=\"veg\"\n            />\n            <div className=\"card-body\">\n              <h3 className=\"h2 text-black mb-0 user--name\">{`${storedData.data.user.first_name} ${storedData.data.user.last_name}`}</h3>\n            </div>\n            <ul className=\"list-group list-group-flush\">\n              <li className=\"list-group-item\">\n                First Name: {storedData.data.user.first_name}\n              </li>\n              <li className=\"list-group-item\">\n                Last Name: {storedData.data.user.last_name}\n              </li>\n              <li className=\"list-group-item\">\n                Email: {storedData.data.user.email}\n              </li>\n              <li className=\"list-group-item\">Intolerances: {intolerances}</li>\n            </ul>\n            <div className=\"card-body\">\n              <div>\n                <button onClick={toggleModal} className=\"btn btn-primary\">\n                  Edit\n                </button>\n              </div>\n\n              {showModal && (\n                <EditProfile\n                  toggle={toggleModal}\n                  state={(showModal, setShowModal)}\n                  storedData={storedData}\n                  setIntolerances={setIntolerances}\n                />\n              )}\n            </div>\n          </div>\n        </section>\n      )}\n    </>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}